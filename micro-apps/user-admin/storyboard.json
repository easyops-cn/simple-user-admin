{
  "$schema": "../../node_modules/@easyops/brick-types/.schema/storyboard.json",
  "imports": ["@bricks/basic-bricks"],
  "app": {
    "name": "用户管理",
    "id": "user-admin",
    "homepage": "/user-admin"
  },
  "routes": [
    {
      "path": "/user-admin",
      "exact": true,
      "menu": {
        "sidebarMenu": {
          "title": "用户管理",
          "menuItems": []
        }
      },
      "bricks": [
        {
          "brick": "basic-bricks.micro-view",
          "properties": {
            "pageTitle": "用户列表"
          },
          "slots": {
            "toolbar": {
              "type": "bricks",
              "bricks": [
                {
                  "brick": "basic-bricks.general-button",
                  "properties": {
                    "buttonName": "新建",
                    "buttonIcon": "plus"
                  },
                  "events": {
                    "general.button.click": {
                      "action": "history.push",
                      "args": ["${APP.homepage}/create"]
                    }
                  }
                }
              ]
            },
            "content": {
              "type": "bricks",
              "bricks": [
                {
                  "brick": "user-admin.provider-user-list",
                  "bg": true
                },
                {
                  "brick": "presentational-bricks.brick-table",
                  "lifeCycle": {
                    "useResolves": [
                      {
                        "provider": "user-admin\\.provider-user-list",
                        "name": "dataSource"
                      }
                    ]
                  },
                  "properties": {
                    "columns": [
                      {
                        "title": "名称",
                        "dataIndex": "name"
                      },
                      {
                        "title": "年龄",
                        "dataIndex": "age"
                      },
                      {
                        "title": "地址",
                        "dataIndex": "address"
                      }
                    ]
                  }
                }
              ]
            }
          }
        }
      ]
    },
    {
      "path": "${APP.homepage}/create",
      "exact": true,
      "menu": {
        "sidebarMenu": {
          "title": "用户管理",
          "menuItems": []
        },
        "breadcrumb": {
          "items": [
            {
              "text": "新建"
            }
          ]
        }
      },
      "bricks": [
        {
          "brick": "basic-bricks.micro-view",
          "slots": {
            "content": {
              "type": "bricks",
              "bricks": [
                {
                  "brick": "basic-bricks.general-card",
                  "properties": {
                    "configProps": {
                      "title": "新建用户"
                    }
                  },
                  "slots": {
                    "content": {
                      "type": "bricks",
                      "bricks": [
                        {
                          "brick": "user-admin.provider-create-user",
                          "bg": true,
                          "events": {
                            "response.success": {
                              "action": "history.push",
                              "args": ["${APP.homepage}"]
                            }
                          }
                        },
                        {
                          "brick": "forms.general-form",
                          "events": {
                            "validate.success": {
                              "target": "user-admin\\.provider-create-user",
                              "method": "setArgsAndExecute",
                              "args": [{ "0": "${event.detail}" }]
                            },
                            "validate.error": {
                              "action": "console.warn",
                              "args": ["${EVENT.type}", "${EVENT.detail}"]
                            }
                          },
                          "slots": {
                            "items": {
                              "type": "bricks",
                              "bricks": [
                                {
                                  "brick": "forms.general-input",
                                  "properties": {
                                    "name": "name",
                                    "label": "名称",
                                    "placeholder": "请输入名称",
                                    "required": true
                                  }
                                },
                                {
                                  "brick": "forms.general-input-number",
                                  "properties": {
                                    "name": "age",
                                    "label": "年龄",
                                    "placeholder": "请输入年龄",
                                    "required": false
                                  }
                                },
                                {
                                  "brick": "forms.general-input",
                                  "properties": {
                                    "name": "address",
                                    "label": "地址",
                                    "placeholder": "请输入地址"
                                  }
                                },
                                {
                                  "brick": "forms.general-buttons",
                                  "properties": {
                                    "showCancelButton": true,
                                    "submitText": "提交",
                                    "cancelText": "取消"
                                  },
                                  "events": {
                                    "submit.button.click": {
                                      "action": "console.log"
                                    },
                                    "cancel.button.click": {
                                      "action": "history.push",
                                      "args": ["${APP.homepage}"]
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
